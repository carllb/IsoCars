[gd_scene load_steps=7 format=4 uid="uid://d3qdva6rk1xkp"]

[ext_resource type="Texture2D" uid="uid://cdabw38tq3c07" path="res://assets/background/tile_grid_test_3.png" id="1_b684o"]
[ext_resource type="PackedScene" uid="uid://bc3lfejnfa42e" path="res://Scenes/car.tscn" id="2_olyx2"]

[sub_resource type="GDScript" id="GDScript_oqkaj"]
script/source = "extends Node2D

@export var mob_scene: PackedScene

# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	$MobTimer.start()


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	pass


func _on_mob_timer_timeout() -> void:
	# Create a new instance of the Mob scene.
	var mob = mob_scene.instantiate()

	# Choose a random location on Path2D.
	var mob_spawn_location = $MobPath/MobSpawnLocation
	mob_spawn_location.progress_ratio = randf()

	# Set the mob's direction perpendicular to the path direction.
	var direction = mob_spawn_location.rotation + PI / 2

	# Set the mob's position to a random location.
	mob.position = mob_spawn_location.position

	# Add some randomness to the direction.
	direction += randf_range(-PI / 4, PI / 4)
	mob.rotation = direction

	# Choose the velocity for the mob.
	var velocity = Vector2(randf_range(150.0, 250.0), 0.0)

	# Spawn the mob by adding it to the Main scene.
	add_child(mob)
"

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_ufy20"]
texture = ExtResource("1_b684o")
texture_region_size = Vector2i(100, 100)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
3:4/0 = 0
0:5/0 = 0

[sub_resource type="TileSet" id="TileSet_6a7gm"]
tile_shape = 1
tile_size = Vector2i(100, 60)
sources/9 = SubResource("TileSetAtlasSource_ufy20")

[sub_resource type="Curve2D" id="Curve2D_i2ke7"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 16, 31, 0, 0, 0, 0, 347, 232, 0, 0, 0, 0, 597, 93, 0, 0, 0, 0, 878, 266, 0, 0, 0, 0, 610, 447, 0, 0, 0, 0, 851, 591, 0, 0, 0, 0, 1231, 371)
}
point_count = 7

[node name="Main" type="Node2D"]
position = Vector2(1, 0)
script = SubResource("GDScript_oqkaj")
mob_scene = ExtResource("2_olyx2")

[node name="TileMapLayer" type="TileMapLayer" parent="."]
position = Vector2(0, -1)
tile_map_data = PackedByteArray("AAAAABQACQAAAAMAAAABABQACQAAAAMAAAACABQACQAAAAMAAAADABQACQAAAAMAAAAEABQACQAAAAMAAAAFABQACQAAAAMAAAAFABUACQAAAAMAAAAGABQACQAAAAMAAAAGABUACQAAAAMAAAAHABQACQAAAAMAAAAIABQACQADAAIAAAAIABUACQAAAAMAAAAJABQACQAAAAMAAAAKABQACQAAAAMAAAAKABUACQAAAAMAAAALABQACQAAAAMAAAAIABMACQABAAAAAAAHABUACQAAAAMAAAAHABYACQAAAAMAAAAHABcACQAAAAMAAAAJABUACQAAAAMAAAAEABUACQAAAAMAAAAHABMACQAAAAAAAAAGABMACQAAAAMAAAAFABMACQAAAAMAAAAJABMACQAAAAMAAAAKABMACQAAAAMAAAAHABIACQAAAAAAAAAGABIACQAAAAMAAAAFABIACQAAAAMAAAAEABIACQAAAAMAAAAEABEACQAAAAMAAAAFABEACQAAAAMAAAAIABIACQACAAEAAAAJABIACQABAAAAAAAKABIACQAAAAMAAAALABIACQAAAAMAAAAIABEACQADAAAAAAAHABEACQACAAAAAAAGABEACQAAAAAAAAAEABAACQAAAAMAAAADABAACQAAAAMAAAACABAACQAAAAMAAAABAA8ACQAAAAMAAAABABAACQAAAAMAAAAAABAACQAAAAMAAAD//w8ACQAAAAMAAAAAAA8ACQAAAAMAAAACAA8ACQAAAAMAAAADABEACQAAAAMAAAADABMACQAAAAMAAAACABMACQAAAAMAAAABABMACQAAAAMAAAAEABMACQAAAAMAAAADABIACQAAAAMAAAACABIACQAAAAMAAAABABIACQAAAAMAAAAAABMACQAAAAMAAAAAABIACQAAAAMAAAD//xMACQAAAAMAAAACABEACQAAAAMAAAAAABEACQAAAAMAAAABABEACQAAAAMAAAD//xEACQAAAAMAAAAKABEACQAAAAMAAAAKABAACQABAAAAAAAJAA8ACQADAAAAAAAJABAACQADAAAAAAAIABAACQAAAAMAAAAHAA8ACQAAAAMAAAAHAA4ACQAAAAMAAAAGAA4ACQABAAEAAAAFAA4ACQABAAIAAAAEAA4ACQAAAAMAAAADAA0ACQAAAAMAAAADAA4ACQAAAAMAAAADAA8ACQAAAAMAAAAEAA8ACQAAAAMAAAAFAA8ACQAAAAAAAAAGABAACQAAAAAAAAAHABAACQACAAAAAAAJABEACQABAAAAAAALABAACQAAAAMAAAAIAA8ACQAAAAMAAAAGAA8ACQACAAAAAAAFABAACQAAAAMAAAAKAA8ACQABAAAAAAAIAA4ACQAAAAMAAAAFAA0ACQADAAAAAAAEAA0ACQAAAAMAAAACAA0ACQAAAAMAAAABAA0ACQAAAAMAAAABAA4ACQAAAAMAAAAAAA4ACQAAAAMAAAACAAwACQAAAAMAAAACAAsACQAAAAMAAAADAAoACQAAAAMAAAADAAkACQAAAAMAAAADAAgACQADAAIAAAACAAkACQAAAAMAAAACAAoACQAAAAMAAAACAA4ACQAAAAMAAAADAAcACQABAAAAAAAEAAYACQABAAAAAAADAAUACQADAAAAAAAEAAQACQADAAAAAAAEAAMACQADAAAAAAAEAAIACQAAAAMAAAAEAAEACQAAAAMAAAAEAAAACQAAAAMAAAAEAP//CQAAAAMAAAAFAP7/CQAAAAMAAAADAP//CQAAAAMAAAADAAAACQAAAAMAAAADAAEACQAAAAMAAAADAAIACQAAAAMAAAACAAMACQAAAAMAAAACAAQACQACAAAAAAABAAUACQAAAAAAAAABAAYACQAAAAMAAAABAAcACQAAAAMAAAABAAgACQAAAAMAAAABAAkACQAAAAMAAAACAAgACQAAAAMAAAACAAcACQAAAAAAAAADAAYACQACAAEAAAACAP//CQAAAAMAAAACAAAACQAAAAMAAAACAAEACQAAAAMAAAACAAIACQAAAAMAAAABAAMACQACAAAAAAABAAQACQAAAAAAAAAAAAkACQAAAAMAAAABAAoACQAAAAMAAAABAAsACQAAAAMAAAADAAwACQAAAAMAAAADAAsACQAAAAMAAAAEAAoACQAAAAMAAAAEAAkACQAAAAMAAAAEAAgACQAAAAMAAAAEAAcACQAAAAMAAAAEAAUACQABAAAAAAAFAAQACQABAAAAAAAAAAUACQAAAAMAAAAAAAYACQAAAAMAAAAAAAcACQAAAAMAAAAAAAgACQAAAAMAAAD//wkACQAAAAMAAAAAAAoACQAAAAMAAAADAAQACQAAAAMAAAADAAMACQAAAAMAAAAAAP//CQAAAAMAAAAAAAAACQACAAAAAAAAAAEACQACAAAAAAAAAAIACQAAAAAAAAD//wMACQAAAAMAAAD//wUACQAAAAMAAAD//wcACQAAAAMAAAD//wEACQAAAAAAAAAAAAMACQAAAAAAAAABAAEACQAAAAMAAAABAAIACQACAAAAAAAAAAQACQAAAAMAAAACAP7/CQAAAAMAAAABAP//CQAAAAMAAAABAAAACQAAAAMAAAAAAAsACQAAAAMAAAACAAYACQAAAAAAAAACAAUACQACAAAAAAD//wsACQAAAAMAAAAAAAwACQAAAAMAAAD//w0ACQAAAAMAAAAAAA0ACQAAAAMAAAABAAwACQAAAAMAAAAFAAMACQADAAEAAAAGAAIACQACAAAAAAAGAAEACQAAAAMAAAAGAAAACQAAAAMAAAAGAP//CQAAAAMAAAAFAP//CQAAAAMAAAAFAAAACQAAAAMAAAAFAAEACQACAAIAAAAFAAIACQADAAAAAAAHAAIACQAAAAMAAAAHAAMACQAAAAMAAAAIAAIACQAAAAMAAAAJAAIACQAAAAMAAAAJAAEACQAAAAMAAAAKAAAACQAAAAMAAAAKAAEACQAAAAMAAAALAAAACQAAAAMAAAALAP//CQAAAAMAAAAHAAEACQAAAAMAAAAIAAEACQAAAAMAAAAMAAAACQAAAAMAAAAMAP//CQAAAAMAAAAHAAAACQAAAAMAAAAHAP//CQAAAAMAAAAIAAAACQAAAAMAAAAJAAAACQAAAAMAAAANAP//CQAAAAMAAAAMAAEACQAAAAMAAAANAAEACQAAAAMAAAAIAP//CQAAAAMAAAAJAP//CQAAAAMAAAAKAP//CQAAAAMAAAALAAEACQAAAAMAAAANAAAACQAAAAMAAAAIAAMACQAAAAMAAAAJAAMACQAAAAMAAAAKAAQACQAAAAMAAAAKAAMACQAAAAMAAAALAAQACQAAAAMAAAAMAAQACQAAAAMAAAANAAQACQAAAAMAAAANAAUACQAAAAMAAAAHAAQACQACAAAAAAAGAAMACQACAAAAAAAGAAQACQAAAAAAAAAJAAQACQAAAAMAAAALAAMACQAAAAMAAAAMAAMACQAAAAMAAAAMAAIACQAAAAMAAAALAAIACQAAAAMAAAAKAAIACQAAAAMAAAANAAMACQAAAAMAAAANAAIACQAAAAMAAAAIAAUACQAAAAMAAAAHAAUACQACAAAAAAAGAAUACQAAAAAAAAAGAAYACQAAAAMAAAAFAAcACQAAAAMAAAAGAAcACQAAAAMAAAAHAAYACQAAAAAAAAAIAAYACQACAAAAAAAIAAcACQACAAAAAAAJAAYACQAAAAMAAAAJAAcACQAAAAMAAAAKAAcACQAAAAMAAAALAAcACQAAAAMAAAAMAAcACQAAAAMAAAAMAAYACQAAAAMAAAALAAYACQAAAAMAAAAKAAYACQAAAAMAAAAFAAUACQAAAAMAAAAJAAUACQAAAAMAAAALAAUACQAAAAMAAAAIAAQACQAAAAMAAAAKAAUACQAAAAMAAAAMAAUACQAAAAMAAAANAAYACQAAAAMAAAAHAAcACQAAAAAAAAAHAAgACQAAAAMAAAAIAAgACQAAAAEAAAAIAAkACQABAAAAAAAJAAkACQAAAAMAAAAKAAgACQAAAAMAAAALAAgACQAAAAMAAAALAAkACQAAAAMAAAAMAAgACQAAAAMAAAANAAgACQAAAAMAAAAFAAgACQAAAAMAAAAGAAgACQAAAAMAAAAJAAgACQAAAAIAAAAFAAYACQAAAAMAAAAFAAkACQAAAAMAAAAHAAkACQADAAAAAAAJAAoACQAAAAMAAAAIAAoACQABAAAAAAAHAAsACQABAAAAAAAGAAsACQADAAAAAAAGAAwACQADAAAAAAAFAAwACQAAAAMAAAAHAAwACQABAAAAAAAIAAsACQAAAAMAAAAKAAoACQAAAAMAAAAKAAkACQAAAAMAAAAFAAoACQAAAAMAAAAEAAwACQAAAAMAAAAEAAsACQAAAAMAAAAFAAsACQAAAAMAAAAMAAkACQAAAAMAAAAGAAkACQAAAAMAAAAIAAwACQAAAAMAAAAJAAwACQAAAAMAAAAKAAwACQAAAAMAAAALAAwACQADAAAAAAALAAsACQADAAAAAAAMAAwACQABAAAAAAALAAoACQAAAAMAAAAKAAsACQAAAAMAAAAJAA4ACQAAAAMAAAAKAA4ACQADAAAAAAALAA4ACQABAAAAAAAMAA4ACQAAAAMAAAALAA0ACQABAAAAAAAKAA0ACQADAAAAAAAJAA0ACQAAAAMAAAAIAA0ACQAAAAMAAAAHAA0ACQAAAAMAAAALAA8ACQAAAAMAAAAHAAoACQADAAAAAAAGAAoACQAAAAMAAAAGAA0ACQABAAAAAAAJAAsACQAAAAMAAAA=")
tile_set = SubResource("TileSet_6a7gm")

[node name="MobTimer" type="Timer" parent="."]
wait_time = 0.5

[node name="MobPath" type="Path2D" parent="."]
curve = SubResource("Curve2D_i2ke7")

[node name="MobSpawnPath" type="PathFollow2D" parent="MobPath"]
position = Vector2(101.47, 82.9015)
rotation = 0.545734
progress = 100.0

[connection signal="timeout" from="MobTimer" to="." method="_on_mob_timer_timeout"]
